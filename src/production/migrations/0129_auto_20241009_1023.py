# Generated by Django 3.2.15 on 2024-10-09 10:23

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('configurations', '0222_compteprestataireveos'),
        ('production', '0128_aliment_profession_libelle'),
    ]

    operations = [
        migrations.CreateModel(
            name='HistoriqueApporteurPolice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('taux_com_affaire_nouvelle', models.FloatField(blank=True, null=True)),
                ('taux_com_renouvellement', models.FloatField(blank=True, null=True)),
                ('date_effet', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('deleted_at', models.DateTimeField(auto_now=True)),
                ('statut_validite', models.CharField(blank=True, choices=[('ACTIF', 'Actif'), ('INACTIF', 'Inactif')], default='VALIDE', max_length=15, null=True)),
                ('added_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.RESTRICT, to=settings.AUTH_USER_MODEL)),
                ('apporteur', models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, to='configurations.apporteur')),
                ('base_calcul', models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, to='configurations.basecalcul')),
            ],
            options={
                'verbose_name': 'historique des apporteurs de la police',
                'verbose_name_plural': 'historiques des apporteurs de la police',
                'db_table': 'historique_apporteurs_police',
            },
        ),
        migrations.CreateModel(
            name='HistoriquePolice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('veos_code_client', models.CharField(blank=True, max_length=50, null=True)),
                ('veos_code_cie', models.CharField(blank=True, max_length=50, null=True)),
                ('veos_id_npol', models.CharField(blank=True, max_length=50, null=True)),
                ('veos_id_pol', models.CharField(blank=True, max_length=50, null=True)),
                ('apporteur', models.CharField(choices=[('OUI', 'Oui'), ('NON', 'Non'), ('', 'Choisir')], max_length=3, null=True)),
                ('programme_international', models.CharField(choices=[('OUI', 'Oui'), ('NON', 'Non'), ('', 'Choisir')], max_length=3, null=True)),
                ('placement_gestion', models.CharField(choices=[('LOCAL', 'En Local'), ('PAR LE COURTIER MASTER', 'Par Le Courtier Master'), ('', 'Choisir')], max_length=50, null=True)),
                ('date_souscription', models.DateField(null=True)),
                ('date_debut_effet', models.DateField()),
                ('date_fin_effet', models.DateField()),
                ('date_fin_police', models.DateField(null=True)),
                ('preavis_de_resiliation', models.CharField(max_length=50, null=True)),
                ('mode_renouvellement', models.CharField(choices=[('TACITE RECONDUCTION', 'Tacite Reconduction'), ('SANS TACITE RECONDUCTION', 'Sans Tacite Reconduction'), ('', 'Choisir')], max_length=50, null=True)),
                ('date_prochaine_facture', models.DateField(null=True)),
                ('taux_com_courtage', models.FloatField(null=True)),
                ('taux_com_courtage_terme', models.FloatField(null=True)),
                ('taux_com_gestion', models.FloatField(null=True)),
                ('participation', models.CharField(choices=[('OUI', 'Oui'), ('NON', 'Non'), ('', 'Choisir')], max_length=3, null=True)),
                ('taux_participation', models.IntegerField(blank=True, null=True)),
                ('prime_ht', models.BigIntegerField(null=True)),
                ('prime_ttc', models.BigIntegerField(null=True)),
                ('prime_net', models.BigIntegerField(null=True)),
                ('commission_gestion', models.BigIntegerField(null=True)),
                ('commission_courtage', models.BigIntegerField(null=True)),
                ('commission_intermediaires', models.BigIntegerField(null=True)),
                ('commission_annuelle', models.BigIntegerField(null=True)),
                ('cout_police_compagnie', models.BigIntegerField(null=True)),
                ('cout_police_courtier', models.BigIntegerField(null=True)),
                ('taxe', models.BigIntegerField(null=True)),
                ('autres_taxes', models.BigIntegerField(null=True)),
                ('prime_famille', models.IntegerField(null=True)),
                ('nombre_max_personne_famille', models.IntegerField(null=True)),
                ('nombre_max_enfants_famille', models.IntegerField(null=True)),
                ('age_max_adultes', models.IntegerField(null=True)),
                ('age_max_enfants', models.IntegerField(null=True)),
                ('surprime_personne_sup', models.IntegerField(null=True)),
                ('surprime_enfant_sup', models.IntegerField(null=True)),
                ('surprime_age_adulte', models.IntegerField(null=True)),
                ('surprime_ascendant', models.IntegerField(null=True)),
                ('prime_personne', models.IntegerField(null=True)),
                ('prime_adulte', models.IntegerField(null=True)),
                ('prime_enfant', models.IntegerField(null=True)),
                ('taux_cotisation', models.IntegerField(null=True)),
                ('part_employeur', models.IntegerField(null=True)),
                ('cotisation_minimale', models.IntegerField(null=True)),
                ('cotisation_maximale', models.IntegerField(null=True)),
                ('type_majoration', models.CharField(choices=[('TAUX', 'Taux'), ('MONTANT', 'Montant')], default='', max_length=50, null=True)),
                ('autofinancement', models.CharField(choices=[('OUI', 'Oui'), ('NON', 'Non'), ('', 'Choisir')], default='', max_length=3, null=True)),
                ('calcul_tm', models.CharField(choices=[('SUR PLAFOND', 'Sur Plafond'), ('SUR FRAIS REEL', 'Sur Frais Reel'), ('', 'Choisir')], default='', max_length=50, null=True)),
                ('numero', models.CharField(blank=True, max_length=50, null=True)),
                ('numero_provisoire', models.CharField(blank=True, max_length=50, null=True)),
                ('taux_charge', models.FloatField(null=True)),
                ('coefficient_n', models.FloatField(null=True)),
                ('coefficient_n1', models.FloatField(null=True)),
                ('coefficient_n2', models.FloatField(null=True)),
                ('coefficient_n3', models.FloatField(null=True)),
                ('observation', models.CharField(max_length=255, null=True)),
                ('logo_partenaire', models.ImageField(blank=True, null=True, upload_to='clients/polices/logos_partenaires/')),
                ('statut_contrat', models.CharField(choices=[('PROJET', 'Projet'), ('CONTRAT', 'Contrat')], default='PROJET', max_length=15, null=True)),
                ('statut', models.CharField(choices=[('ACTIF', 'Actif'), ('INACTIF', 'Inactif'), ('ANNULE', 'Annule')], default='ACTIF', max_length=15, null=True)),
                ('statut_validite', models.CharField(choices=[('VALIDE', 'Valide'), ('SUPPRIME', 'Supprime'), ('BROUILLON', 'Brouillon'), ('CLOTURE', 'Cloture')], default='VALIDE', max_length=15, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('bureau', models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, to='configurations.bureau')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, to='production.client')),
                ('compagnie', models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, to='configurations.compagnie')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.RESTRICT, to=settings.AUTH_USER_MODEL)),
                ('devise', models.ForeignKey(null=True, on_delete=django.db.models.deletion.RESTRICT, to='configurations.devise')),
                ('fractionnement', models.ForeignKey(null=True, on_delete=django.db.models.deletion.RESTRICT, to='configurations.fractionnement')),
                ('intermediaires', models.ManyToManyField(through='production.HistoriqueApporteurPolice', to='configurations.Apporteur')),
                ('mode_calcul', models.ForeignKey(null=True, on_delete=django.db.models.deletion.RESTRICT, to='configurations.modecalcul')),
                ('mode_reglement', models.ForeignKey(null=True, on_delete=django.db.models.deletion.RESTRICT, to='configurations.modereglement')),
                ('police', models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, to='production.police')),
                ('produit', models.ForeignKey(null=True, on_delete=django.db.models.deletion.RESTRICT, to='configurations.produit')),
                ('regularisation', models.ForeignKey(null=True, on_delete=django.db.models.deletion.RESTRICT, to='configurations.regularisation')),
            ],
            options={
                'verbose_name': 'Historique Police',
                'verbose_name_plural': 'Historiques Polices',
                'db_table': 'historique_polices',
            },
        ),
        migrations.CreateModel(
            name='HistoriqueTaxePolice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('montant', models.FloatField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('historique_police', models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, to='production.historiquepolice')),
                ('taxe', models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, to='configurations.taxe')),
            ],
            options={
                'verbose_name': 'Historique des taxes de la police',
                'verbose_name_plural': 'Historique des taxes de la police',
                'db_table': 'historique_taxe_police',
            },
        ),
        migrations.AddField(
            model_name='historiquepolice',
            name='taxes',
            field=models.ManyToManyField(through='production.HistoriqueTaxePolice', to='configurations.Taxe'),
        ),
        migrations.AddField(
            model_name='historiquepolice',
            name='ticket_moderateur',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.RESTRICT, to='configurations.ticketmoderateur'),
        ),
        migrations.AddField(
            model_name='historiquepolice',
            name='type_assurance',
            field=models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, to='configurations.typeassurance'),
        ),
        migrations.AddField(
            model_name='historiquepolice',
            name='type_prefinancement',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.RESTRICT, to='configurations.typeprefinancement'),
        ),
        migrations.AddField(
            model_name='historiquepolice',
            name='updated_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.RESTRICT, related_name='historique_police_updated_by', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='historiqueapporteurpolice',
            name='historique_police',
            field=models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, to='production.historiquepolice'),
        ),
    ]
